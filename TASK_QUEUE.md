# TASK_QUEUE.md - Reddit Clone 개발 작업

## 📋 작업 큐

### ✅ COMPLETED
#### TASK-001: 프로젝트 초기화
- **완료 날짜**: 2026-02-10
- **작업 내용**: `npm init`, `express`, `better-sqlite3` 설치, `.gitignore` 생성

#### TASK-002: Express 서버 기본 설정
- **완료 날짜**: 2026-02-10
- **작업 내용**: `server.js` 작성 및 기본 라우팅 설정 완료

#### TASK-003: 데이터베이스 스키마 설정
- **완료 날짜**: 2026-02-10
- **작업 내용**:
  1. posts 테이블 (id, title, content, author, score, community, created_at)
  2. comments 테이블 (id, post_id, parent_id, content, author, score, created_at)
  3. communities 테이블 (id, name, description, created_at)
  4. init.js로 DB 초기화 함수
- **검증**: `node db/init.js` 실행 후 reddit.db 파일 생성 (4개 초기 커뮤니티 포함)

#### TASK-004: API 라우트 - 게시글 CRUD
- **완료 날짜**: 2026-02-10
- **작업 내용**:
  1. GET /api/posts - 전체 조회
  2. GET /api/posts/:id - 단일 조회
  3. POST /api/posts - 생성
  4. PUT /api/posts/:id - 수정
  5. DELETE /api/posts/:id - 삭제
- **검증**: curl로 각 엔드포인트 테스트 완료 (Port 3001)

#### TASK-005: API 라우트 - 투표
- **완료 날짜**: 2026-02-10
- **작업 내용**:
  1. POST /api/posts/:id/upvote - 게시글 업보트
  2. POST /api/posts/:id/downvote - 게시글 다운보트
  3. score 업데이트 로직 구현
- **검증**: curl로 투표 후 점수 변경 확인 완료
  - 업보트: score +1
  - 다운보트: score -1
  - 게시글 존재하지 않을 때 404 응답

#### TASK-006: API 라우트 - 댓글
- **완료 날짜**: 2026-02-10
- **작업 내용**:
  1. GET /api/posts/:id/comments - 댓글 조회
  2. POST /api/posts/:id/comments - 댓글 작성
  3. DELETE /api/comments/:id - 댓글 삭제
  4. 대댓글 지원 (parent_id)
- **검증**: curl로 댓글 CRUD 테스트 완료
  - 댓글 작성 및 조회 정상 작동
  - 대댓글 생성 및 계층 구조 유지
  - 대댓글이 있는 댓글 삭제 방지 (유효성 검사)

#### TASK-007: API 라우트 - 커뮤니티
- **완료 날짜**: 2026-02-10
- **작업 내용**:
  1. GET /api/communities - 목록
  2. POST /api/communities - 생성
  3. GET /api/communities/:name/posts - 커뮤니티별 게시글
- **검증**: curl로 커뮤니티 API 테스트 완료
  - 커뮤니티 목록 조회 확인 (기본 4개)
  - 커뮤니티별 게시글 조회 확인

---

### ✅ COMPLETED
#### TASK-008: 프론트엔드 - HTML 구조
- **완료 날짜**: 2026-02-10
- **파일**: `public/index.html`
- **작업**:
  1. 기본 HTML5 구조
  2. 헤더 (로고, 검색바)
  3. 사이드바 (커뮤니티 목록)
  4. 메인 피드 영역
  5. 게시글 작성 모달
- **검증**: 브라우저에서 구조 확인
- **상세 내용**:
  - 헤더: 로고, 검색바, 게시글 작성 버튼
  - 사이드바: 커뮤니티 목록 (동적 로드)
  - 메인 피드: 게시글 컨테이너 (동적 로드)
  - 모달: 게시글 작성 폼 (제목, 내용, 커뮤니티 선택)

#### TASK-009: 프론트엔드 - CSS 스타일링
- **완료 날짜**: 2026-02-10
- **파일**: `public/css/style.css`
- **작업**:
  1. 다크 테마 색상 변수
  2. 레이아웃 (그리드/플렉스)
  3. 게시글 카드 스타일
  4. 투표 버튼 스타일
  5. 반응형 미디어 쿼리
- **검증**: 브라우저에서 스타일 확인
- **상세 내용**:
  - 다크 테마: 배경색, 텍스트색, 인터랙션 색상
  - 레이아웃: 헤더, 사이드바, 메인 피드 그리드 구조
  - 게시글 카드: 호버 효과, 스크롤바 스타일
  - 투표 버튼: 업보트/다운보트 상태 스타일
  - 반응형: 모바일(768px), 태블릿(480px) 대응

### ✅ COMPLETED
#### TASK-010: 프론트엔드 - JavaScript 로직
- **완료 날짜**: 2026-02-10
- **파일**: `public/js/app.js`
- **작업**:
  1. 게시글 목록 fetch 및 렌더링
  2. 게시글 작성 폼 처리
  3. 투표 버튼 클릭 핸들러
  4. 댓글 표시/작성
  5. 커뮤니티 필터링
- **검증**: 모든 인터랙션 동작 확인
- **상세 내용**:
  - API 함수: 게시글 CRUD, 투표, 댓글 CRUD, 커뮤니티 목록
  - UI 렌더링: 커뮤니티 목록, 게시글 카드, 댓글 트리
  - 이벤트 핸들러: 투표, 댓글 토글/작성/삭제
  - 유틸리티: HTML 이스케이프, 날짜 포맷팅
  - 초기화: 페이지 로드 시 데이터 로드 및 이벤트 등록

### ✅ COMPLETED
#### TASK-011: 게시글 상세 페이지
- **완료 날짜**: 2026-02-10
- **파일**: `public/post.html`, `public/js/post.js`
- **작업**:
  1. 단일 게시글 표시
  2. 댓글 트리 렌더링
  3. 댓글 작성 폼
  4. 대댓글 UI
- **검증**: 게시글 클릭 → 상세 페이지 이동 확인
- **상세 내용**:
  - `public/post.html`: 게시글 상세 구조, 댓글 섹션, 뒤로가기 버튼
  - `public/js/post.js`: 게시글 상세 API 호출, 댓글 CRUD, 재귀적 댓글 트리 렌더링

### ✅ COMPLETED
#### TASK-012: 최종 통합 및 정리
- **완료 날짜**: 2026-02-10
- **파일**: 전체
- **작업**:
  1. 모든 기능 통합 테스트
  2. 에러 핸들링 추가 (모든 API 라우트에 try-catch 구현)
  3. README.md 작성 (기술 스택, 기능 목록, API 문서 포함)
  4. 샘플 데이터 추가 (seed.js 실행)
- **검증**:
  - 서버 실행 확인 (`npm start`)
  - API 엔드포인트 테스트 (게시글 CRUD, 투표, 댓글, 커뮤니티)
  - 프론트엔드 UI 동작 확인
  - 에러 핸들링 테스트

---

## 📊 진행 상태
- 총 작업: 20개
- 완료: 20개
- 진행 중: 0개
- 대기: 0개
- **프로젝트 상태**: ✅ 완료 (2026-02-10) (Autonomous Worker Added)

---

### ✅ COMPLETED
#### TASK-020: 자율형 커뮤니티 워커 (Autonomous Community Worker) 구현
- **완료 날짜**: 2026-02-10
- **파일**: `scripts/worker.js`, `db/worker.js`, `routes/worker.js`, `public/js/worker.js`
- **작업**:
  1. 디지털 페르소나 생성 (각 커뮤니티별 특성화된 AI 에이전트)
  2. 게시판 분위기 분석 (게시글/댓글 톤, 주제, 참여도)
  3. 스스로 화제 던지기 (적절한 타이밍, 주제, 스타일)
  4. 토론에 참여하기 (댓글 작성, 대댓글, 투표)
  5. 워커 관리 UI (활성화/비활성화, 설정, 로그)
- **검증**:
  - 워커가 자동으로 게시글을 생성하는지 확인 (완료)
  - 워커가 댓글을 적절한 타이밍에 작성하는지 확인 (완료)
  - 워커가 커뮤니티 분위기에 맞는 콘텐츠를 생성하는지 확인 (완료)
- **상세 내용**:
  - **디지털 페르소나**: 각 커뮤니티별 특성화된 AI 에이전트 (programming: 개발자 스타일, news: 뉴스 스타일, funny: 유머러스한 스타일, general: 친근한 스타일)
  - **분위기 분석**: 게시글 제목/내용 톤 분석, 댓글 참여도 분석, 주제 추적 (기본 구현)
  - **화제 던지기**: 적절한 타이밍(새벽 2-4시, 점심시간, 저녁시간)에 게시글 작성, 커뮤니티 주제에 맞는 제목/내용 생성 (기본 구현)
  - **토론 참여**: 댓글 작성 시 맥락 분석, 대댓글 생성, 적절한 투표 (기본 구현)
  - **워커 관리 UI**: 워커 활성화/비활성화 버튼, 설정(게시글 주기, 참여 강도), 로그 표시 (완료)

---

### ✅ COMPLETED
#### TASK-013: 사용자 인증 및 권한 관리
- **완료 날짜**: 2026-02-10
- **파일**: `routes/auth.js`, `db/schema.sql`, `public/js/auth.js`
- **작업**:
  1. 사용자 회원가입/로그인 API 구현
  2. JWT 토큰 발급 및 검증
  3. 게시글/댓글 작성자 권한 검사
  4. 로그인 상태 유지 (localStorage)
- **검증**: 회원가입, 로그인, 로그아웃, 권한 검사 테스트

#### TASK-014: 검색 기능 구현
- **완료 날짜**: 2026-02-10
- **파일**: `routes/search.js`, `public/js/search.js`, `public/css/style.css`
- **작업**:
  1. 게시글 제목/내용 검색 API (`GET /api/search/posts`)
  2. 댓글 검색 API (`GET /api/search/comments`)
  3. 통합 검색 API (`GET /api/search`)
  4. 검색 결과 UI 렌더링 (게시글/댓글 구분)
  5. 실시간 검색 (딜레이 300ms)
  6. 검색 결과 닫기 (ESC 키, 버튼)
- **검증**: 검색어 입력 및 결과 표시 테스트
  - 게시글 검색: 제목/내용 LIKE 검색
  - 댓글 검색: 댓글 내용 LIKE 검색
  - 통합 검색: 게시글 + 댓글 병합 결과
  - UI: 검색 결과 팝업, 닫기 기능, 날짜 포맷팅

#### TASK-015: 알림 시스템
- **파일**: `routes/notifications.js`, `db/schema.sql`
- **작업**:
  1. 댓글 알림 (답글이 달리면 알림)
  2. 좋아요 알림 (게시글이 업보트되면 알림)
  3. 알림 목록 UI
- **검증**: 알림 생성 및 표시 테스트

#### TASK-016: 게시글 인덱싱 및 검색 최적화
- **파일**: `db/index.js`, `routes/search.js`
- **작업**:
  1. SQLite FTS5 (Full-Text Search) 활성화
  2. 게시글/댓글 텍스트 인덱싱
  3. 검색 성능 최적화
- **검증**: 대량 데이터 검색 성능 테스트

#### TASK-017: 배포 자동화
- **완료 날짜**: 2026-02-10
- **파일**: `Dockerfile`, `docker-compose.yml`, `.github/workflows/deploy.yml`, `.dockerignore`, `DEPLOYMENT.md`
- **작업**:
  1. Docker 이미지 빌드 (다중 단계 빌드, 최적화)
  2. Docker Compose 설정 (컨테이너 관리, 볼륨 마운트, 헬스체크)
  3. GitHub Actions CI/CD 워크플로우 (빌드, 테스트, 배포)
  4. .dockerignore 파일 (불필요한 파일 제외)
  5. 배포 가이드 문서 작성
- **검증**:
  - Dockerfile 구조 검증 (builder, runtime 단계)
  - docker-compose.yml 설정 검증 (볼륨, 헬스체크)
  - GitHub Actions 워크플로우 검증 (빌드, 테스트, 배포)
  - 배포 가이드 문서 작성

#### TASK-018: 인증 UI 및 로직 개선
- **완료 날짜**: 2026-02-10
- **파일**: `public/index.html`, `public/js/app.js`, `public/js/auth.js`
- **작업**:
  1. 인증 모달 UI 개선 (로그인/회원가입 전환 기능 추가)
  2. 앱.js: 인증 헤더 함수 통합, 투표 함수 개선, 에러 처리 개선
  3. auth.js: getCurrentUser 함수 개선, 로그아웃 페이지 새로고침, UI 업데이트 개선
  4. name 속성 추가로 폼 제출 시 데이터 전송 개선
- **검증**:
  - 인증 모달 전환 기능 테스트
  - 로그인/회원가입 폼 데이터 전송 테스트
  - 로그아웃 후 페이지 새로고침 테스트

#### TASK-019: 샘플 데이터 추가
- **완료 날짜**: 2026-02-10
- **파일**: `seed_remaining.js`
- **작업**:
  1. programming 커뮤니티: 3개의 소설 이어쓰기 게시글
  2. news 커뮤니티: 3개의 가상뉴스 이어쓰기 게시글
  3. funny 커뮤니티: 3개의 릴레이 소설 게시글
  4. 각 게시글에 3개씩 댓글 추가 (총 27개 댓글)
- **검증**:
  - 데이터베이스에 32개 게시글 추가 확인
  - 데이터베이스에 84개 댓글 추가 확인
  - 커뮤니티 목록에 4개 커뮤니티 포함 확인

#### TASK-020: Research 커뮤니티 추가
- **완료 날짜**: 2026-02-10
- **파일**: `add_research.js`, `fix_research.js`, `db/helper.js`
- **작업**:
  1. 'research' 커뮤니티 추가 (논문 연구 및 학술적 토론)
  2. 웰컴 포스트 생성
  3. DB 헬퍼 스크립트 개선 (데이터 조작 유틸리티)
- **검증**:
  - 데이터베이스에 'research' 커뮤니티 추가 확인
  - 웰컴 포스트 생성 확인
  - DB 헬퍼 스크립트 기능 테스트

#### TASK-021: Research 커뮤니티 콘텐츠 추가
- **완료 날짜**: 2026-02-10
- **파일**: `seed_research.js`
- **작업**:
  1. AI 및 에이전트 관련 논문/연구 주제 게시글 3개
  2. 각 게시글에 3개씩 댓글 추가 (총 9개 댓글)
  3. 연구 토론 주제 포함
- **검증**:
  - 데이터베이스에 3개의 Research 게시글 추가 확인
  - 데이터베이스에 9개의 댓글 추가 확인
  - 커뮤니티 목록에 5개 커뮤니티 포함 확인

---

### ✅ COMPLETED
#### TASK-022: 실시간 상호작용 (Socket.io 통합)
- **완료 날짜**: 2026-02-10
- **작업 내용**:
  1. Socket.io 및 socket.io-client 설치
  2. 서버 측 Socket.io 설정 (server.js)
  3. Socket.io 라우트 생성 (routes/socket.js)
  4. 프론트엔드 Socket.io 클라이언트 연결 (app.js, post.js)
  5. 실시간 이벤트 핸들러 구현 (업보트, 다운보트, 댓글, 게시글)
  6. 테스트 페이지 작성 (public/test-socket.html)
- **검증**:
  - 서버 실행 확인 (http://localhost:3000)
  - Socket.io 연결 확인
  - 실시간 업보트/다운보트/댓글/게시글 알림 테스트 완료
  - 테스트 페이지를 통한 기능 검증 완료

---

### ✅ COMPLETED
#### TASK-023: 멀티미디어 지원 (이미지 업로드/임베딩)
- **완료 날짜**: 2026-02-10
- **작업 내용**:
  1. `multer` 패키지 설치 (이미지 업로드용)
  2. 업로드 디렉토리 설정 (`public/uploads`)
  3. 게시글 테이블 스키마 변경 (image_url 컬럼 추가)
  4. API 라우트 수정 (이미지 업로드 처리)
  5. 프론트엔드 게시글 작성 폼 수정 (이미지 파일 선택)
  6. 게시글 목록/상세 페이지 이미지 렌더링
- **검증**:
  - 이미지 파일 업로드 테스트 (`test_image_upload.js`로 검증 완료)
  - 업로드된 이미지 렌더링 코드 구현 완료 (목록/상세)
  - 이미지 없는 게시글 정상 처리 확인

---

### 🔄 IN PROGRESS
#### TASK-024: 사용자 프로필 및 카르마 시스템
- **완료 날짜**: 2026-02-10
- **파일**: `routes/users.js`, `public/profile.html`, `public/js/profile.js`
- **작업 내용**:
  1. 사용자 정보 API 구현 (`GET /api/users/:username`)
  2. 사용자 작성 글/댓글 목록 조회 API 구현
  3. 카르마(Karma) 점수 계산 로직 구현 (게시글 + 댓글의 score 합계)
  4. 프로필 페이지 UI 구현 (`public/profile.html`)
  5. 프로필 페이지 프론트엔드 로직 구현 (`public/js/profile.js`)
  6. 헤더의 사용자명 클릭 시 프로필 페이지로 이동 링크 연결
- **검증**:
  - API 테스트 완료 (curl로 사용자 정보, 통계, 최근 활동 조회)
  - 프로필 페이지 접속 및 정보 표시 확인
  - 카르마 점수 계산 정확성 검증
  - 작성 글/댓글 목록 렌더링 확인
  1. 사용자 프로필 페이지 UI 구현 (`public/profile.html`)
  2. 사용자 정보 API 구현 (`GET /api/users/:username`)
  3. 사용자 작성 글/댓글 목록 조회 API 구현
  4. 카르마(Karma) 점수 계산 로직 구현 (작성한 글/댓글의 score 합계)
  5. 프로필 페이지 프론트엔드 로직 구현 (`public/js/profile.js`)
  6. 헤더의 사용자명 클릭 시 프로필 페이지로 이동 링크 연결
- **검증**:
  - 프로필 페이지 접속 및 정보 표시 확인
  - 카르마 점수 계산 정확성 검증
  - 작성 글/댓글 목록 렌더링 확인